<IfModule mod_mime.c>
    AddType font/woff2 .woff2
    AddType font/woff  .woff
</IfModule>

<IfModule mod_headers.c>
    # Static assets: 1 year
    <FilesMatch "\.(?i:css|js|gif|ico|jpe?g|png|webp|avif|svg|pdf|ttf|eot|otf|woff2?|mp4|mpeg)$">
        Header set Cache-Control "public, max-age=31536000, immutable"
        Header unset Set-Cookie
    </FilesMatch>

    # Manifest: 1 week
    <FilesMatch "^manifest\.json$">
        Header set Cache-Control "public, max-age=604800"
        Header unset Set-Cookie
    </FilesMatch>

    # HTML/PHP: always revalidate
    <FilesMatch "\.(?i:html|php)$">
        Header set Cache-Control "no-cache, must-revalidate"
    </FilesMatch>

    # Correct caching when compression is used
    Header append Vary Accept-Encoding
</IfModule>

<IfModule mod_brotli.c>
    AddOutputFilterByType BROTLI_COMPRESS text/html
    AddOutputFilterByType BROTLI_COMPRESS text/css
    AddOutputFilterByType BROTLI_COMPRESS application/javascript
    AddOutputFilterByType BROTLI_COMPRESS application/json
    AddOutputFilterByType BROTLI_COMPRESS image/svg+xml
</IfModule>

<IfModule mod_deflate.c>
    AddOutputFilterByType DEFLATE text/html
    AddOutputFilterByType DEFLATE text/css
    AddOutputFilterByType DEFLATE application/javascript
    AddOutputFilterByType DEFLATE application/json
    AddOutputFilterByType DEFLATE image/svg+xml
</IfModule>
