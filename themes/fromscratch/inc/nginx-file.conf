# FromScratch: include inside server { } for WordPress root

# Gzip
gzip on;
gzip_vary on;
gzip_types text/html text/css application/javascript application/json image/svg+xml;

# Static assets: long cache
location ~* \.(?i)(css|js|gif|ico|jpe?g|png|webp|avif|svg|pdf|ttf|eot|otf|woff2?|mp4|mpeg)$ {
    expires 1y;
    add_header Cache-Control "public, max-age=31536000, immutable";
    add_header Vary Accept-Encoding;
    try_files $uri $uri/ /index.php?$args;
}

# Manifest
location = /manifest.json {
    expires 1w;
    add_header Cache-Control "public, max-age=604800";
    add_header Vary Accept-Encoding;
    try_files $uri =404;
}

# Optional: Brotli (if ngx_brotli is installed)
# brotli on;
# brotli_types text/html text/css application/javascript application/json image/svg+xml;
